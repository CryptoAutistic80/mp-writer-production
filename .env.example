# Root env.example (copy to .env for local dev)

# Backend API
MONGO_URI=mongodb://localhost:27017/mp_writer
# Generate a strong random secret (>=32 chars), e.g. `openssl rand -hex 32`
JWT_SECRET=
REDIS_URL=redis://redis:6379
APP_ORIGIN=http://localhost:3000
# Preferred: configure a keyring and primary version (comma-separated <version>:<key> entries)
DATA_ENCRYPTION_KEY_PRIMARY=
DATA_ENCRYPTION_KEYS=
# Legacy fallback (single key) is still supported for older deployments
# DATA_ENCRYPTION_KEY=

# Dev
# Set to 0 to disable manual credit top ups once Stripe integration is live
ALLOW_DEV_CREDIT_MUTATION=1
NEXT_PUBLIC_ENABLE_DEMO_PURCHASE=1

# Stripe
# Set to 1 to enable Stripe checkout (requires all Stripe config below)
STRIPE_CHECKOUT_ENABLED=0

# Get these from https://dashboard.stripe.com/test/apikeys
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...

# For webhook signature verification
# Create webhook at https://dashboard.stripe.com/test/webhooks
# Point it to: https://yourdomain.com/api/checkout/webhook
# Events to listen for: checkout.session.completed, checkout.session.async_payment_succeeded
# For local testing, use Stripe CLI: stripe listen --forward-to localhost:4000/api/checkout/webhook
STRIPE_WEBHOOK_SECRET=whsec_...

# Create products & prices at https://dashboard.stripe.com/test/products
# Copy the price IDs here (format: price_xxx)
STRIPE_PRICE_ID_CREDITS_3=price_...
STRIPE_PRICE_ID_CREDITS_5=price_...
STRIPE_PRICE_ID_CREDITS_10=price_...

# Amount validation (in minor units: pence for GBP, cents for USD)
# Must match the amounts in your Stripe prices
STRIPE_AMOUNT_CREDITS_3=299
STRIPE_AMOUNT_CREDITS_5=499
STRIPE_AMOUNT_CREDITS_10=999

# Currency (lowercase ISO code)
STRIPE_CURRENCY=gbp

# Frontend env vars (must be prefixed with NEXT_PUBLIC_)
NEXT_PUBLIC_STRIPE_CHECKOUT_ENABLED=0
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...

# Google OAuth
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_CALLBACK_URL=http://localhost:4000/api/auth/google/callback

# OpenAI
OPENAI_API_KEY=
OPENAI_DEEP_RESEARCH_MODEL=
OPENAI_DEEP_RESEARCH_ENABLE_WEB_SEARCH=true
OPENAI_DEEP_RESEARCH_WEB_SEARCH_CONTEXT_SIZE=
OPENAI_DEEP_RESEARCH_VECTOR_STORE_IDS=
OPENAI_DEEP_RESEARCH_ENABLE_CODE_INTERPRETER=false
OPENAI_DEEP_RESEARCH_MAX_TOOL_CALLS=
OPENAI_DEEP_RESEARCH_REASONING_SUMMARY=auto
OPENAI_DEEP_RESEARCH_REASONING_EFFORT=medium
OPENAI_FOLLOW_UP_MODEL=
OPENAI_TRANSCRIPTION_MODEL=gpt-4o-mini-transcribe
OPENAI_LETTER_VERBOSITY=medium
OPENAI_LETTER_REASONING_EFFORT=high
OPENAI_LETTER_MODEL=

# Address
GETADDRESS_API_KEY=
ADDRESS_DEBUG=1

# Frontend
NEXT_PUBLIC_API_URL=
NEXT_BACKEND_ORIGIN=http://backend-api:4000
